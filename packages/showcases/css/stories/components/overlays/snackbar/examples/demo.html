<div class="block">
  <button id="btn-snackbar-1" class="vtmn-btn vtmn-btn_variant--ghost">
    Snackbar with close button
  </button>
</div>

<div class="block">
  <button id="btn-snackbar-2" class="vtmn-btn vtmn-btn_variant--ghost">
    Snackbar
  </button>
</div>

<div class="block">
  <button id="btn-snackbar-3" class="vtmn-btn vtmn-btn_variant--ghost">
    Snackbar with action and close button
  </button>
</div>

<div class="block">
  <button id="btn-snackbar-4" class="vtmn-btn vtmn-btn_variant--ghost">
    Snackbar with action button
  </button>
</div>

<template>
  <div class="vtmn-snackbar">
    <div class="vtmn-snackbar_content">
      This is the description of a snackbar
    </div>
    <button
      id="btn-dismiss-1"
      class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small vtmn-btn--icon-alone"
      onclick="toRemove(this)"
    >
      <span class="vtmn-sr-only">Close snackbar</span>
      <span class="vtmx-close-line" aria-hidden="true"></span>
    </button>
  </div>
</template>

<template>
  <div class="vtmn-snackbar">
    <div class="vtmn-snackbar_content">
      This is the description of a snackbar
    </div>
  </div></template
>

<template>
  <div class="vtmn-snackbar">
    <div class="vtmn-snackbar_content">
      This is the description of a snackbar
    </div>
    <button
      class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small"
    >
      Action
    </button>
    <button
      id="btn-dismiss-3"
      class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small vtmn-btn--icon-alone"
      onclick="toRemove(this)"
    >
      <span class="vtmn-sr-only">Close snackbar</span>
      <span class="vtmx-close-line" aria-hidden="true"></span>
    </button></div
></template>

<template>
  <div class="vtmn-snackbar">
    <div class="vtmn-snackbar_content">
      This is the description of a snackbar
    </div>
    <button
      class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small"
    >
      Action
    </button>
  </div>
</template>

<script>
  const buttonsOpen = document.querySelectorAll('.block .vtmn-btn');
  const templates = document.getElementsByTagName('template');

  //Create the div thaht embed the role status
  const newDiv = document.createElement('div');
  newDiv.setAttribute('role', 'status');
  document.getElementById('root').appendChild(newDiv);

  function showSnackbar(template) {
    const clon = template.content.cloneNode(true);

    //If snackbar already exists, remove it
    if (document.getElementsByClassName('vtmn-snackbar')[0]) {
      document.getElementsByClassName('vtmn-snackbar')[0].remove();
    }

    newDiv.appendChild(clon);

    timeOut();

    function timeOut() {
      const snack = document.querySelector('#root .vtmn-snackbar');
      snack.classList.add('show');
      setTimeout(function () {
        snack.classList.remove('show');
        snack.remove();
      }, 5000);
    }
  }

  for (let i = 0; i < buttonsOpen.length; i++) {
    buttonsOpen[i].addEventListener('click', function () {
      showSnackbar(templates[i]);
    });
  }

  function toRemove(event) {
    event.parentNode.remove();
  }
</script>
