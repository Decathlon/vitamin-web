<div class="block">
  <button id="btn-alert-1" class="vtmn-btn vtmn-btn_variant--ghost">
    Alert with title
  </button>
</div>
<div class="block">
  <button id="btn-alert-2" class="vtmn-btn vtmn-btn_variant--ghost">
    Alert with title and close button
  </button>
</div>
<div class="block">
  <button id="btn-alert-3" class="vtmn-btn vtmn-btn_variant--ghost">
    Alert with title and text
  </button>
</div>
<div class="block">
  <button id="btn-alert-4" class="vtmn-btn vtmn-btn_variant--ghost">
    Alert with title, text and close button
  </button>
</div>

<div class="accessibility-highlight">
  <div class="accessibility-highlight_container_alert">
    <p>
      In this demo showcase, a timer of 8 seconds has been set up. Be aware that
      according to the WCAG:
      <q>
        It is also important to avoid designing alerts that disappear
        automatically. An alert that disappears too quickly can lead to failure
        to meet
        <a
          class="vtmn-link"
          rel="noopener noreferrer"
          href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/time-limits-no-exceptions.html"
        >
          2.0 success criterion 2.2.3.
        </a>
      </q>
    </p>
  </div>
</div>

<template>
  <div
    class="vtmn-alert vtmn-alert_variant--success"
    aria-labelledby="alert-title-1"
  >
    <div class="vtmn-alert_content">
      <div id="alert-title-1" class="vtmn-alert_content-title">
        This is the title of the alert
      </div>
    </div>
  </div>
</template>

<template>
  <div
    id="vtmn-alert-${id}"
    class="vtmn-alert vtmn-alert_variant--success"
    aria-labelledby="alert-title-2"
  >
    <div class="vtmn-alert_content">
      <div id="alert-title-2" class="vtmn-alert_content-title">
        This is the title of the alert
        <button
          class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small vtmn-btn--icon-alone"
          onclick="toRemove(this)"
        >
          <span class="vtmn-sr-only">Close alert</span>
          <span class="vtmx-close-line" aria-hidden="true"></span>
        </button>
      </div>
    </div>
  </div>
</template>

<template>
  <div
    class="vtmn-alert vtmn-alert_variant--warning"
    aria-labelledby="alert-title-3"
    aria-describedby="alert-text-3"
  >
    <div class="vtmn-alert_content">
      <div id="alert-title-3" class="vtmn-alert_content-title">
        This is the title of the alert
      </div>
      <p id="alert-text-3" class="vtmn-alert_content-description">
        Alert are used to draw the users attention to an important information
      </p>
    </div>
  </div>
</template>

<template>
  <div
    class="vtmn-alert vtmn-alert_variant--info"
    aria-labelledby="alert-title-4"
    aria-describedby="alert-text-4"
  >
    <div class="vtmn-alert_content">
      <div id="alert-title-4" class="vtmn-alert_content-title">
        This is the title of the alert
        <button
          class="vtmn-btn vtmn-btn_variant--ghost-reversed vtmn-btn_size--small vtmn-btn--icon-alone"
          onclick="toRemove(this)"
        >
          <span class="vtmn-sr-only">Close alert</span>
          <span class="vtmx-close-line" aria-hidden="true"></span>
        </button>
      </div>
      <p id="alert-text-4" class="vtmn-alert_content-description">
        Alert are used to draw the users attention to an important information
      </p>
    </div>
  </div>
</template>

<script>
  const buttonsOpen = document.querySelectorAll('.block .vtmn-btn');
  const templates = document.getElementsByTagName('template');

  //Create the div thaht embed the role status
  const newDiv = document.createElement('div');
  newDiv.setAttribute('role', 'alert');
  document.getElementById('root').appendChild(newDiv);

  function showAlert(template) {
    const clon = template.content.cloneNode(true);

    //If alert already exists, remove it
    if (document.getElementsByClassName('vtmn-alert')[0]) {
      document.getElementsByClassName('vtmn-alert')[0].remove();
    }

    newDiv.appendChild(clon);

    timeOut();

    function timeOut() {
      const alert = document.querySelector('#root .vtmn-alert');
      alert.classList.add('show');
      setTimeout(function () {
        alert.classList.remove('show');
        alert.remove();
      }, 8000);
    }
  }

  for (let i = 0; i < buttonsOpen.length; i++) {
    buttonsOpen[i].addEventListener('click', function () {
      showAlert(templates[i]);
    });
  }

  function toRemove(event) {
    event.parentNode.parentNode.parentNode.remove();
  }
</script>
