<div class="block">
  <div id="dropdown-demo" class="vtmn-dropdown">
    <label id="dropdown-demo-label">Favorite Sports</label>
    <details id="dropdown-details">
      <summary aria-labelledby="dropdown-demo-label">
        Choose your favorite sports
      </summary>
      <div
        id="dropdown-items"
        class="vtmn-dropdown_items"
        style="height: 200px"
        role="group"
        aria-labelledby="dropdown-demo-label"
        tabindex="0"
      >
        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-1" />
        <label for="dropdown-demo-opt-1">
          <span class="vtmx-emotion-laugh-line"></span>
          Gymnastics
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>

        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-2" />
        <label for="dropdown-demo-opt-2">
          <span class="vtmx-arrow-right-line"></span>
          Archery
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>

        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-3" />
        <label for="dropdown-demo-opt-3">
          <span class="vtmx-football-line"></span>
          Football
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>

        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-4" />
        <label for="dropdown-demo-opt-4">
          <span class="vtmx-riding-line"></span>
          Cycling
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>

        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-5" />
        <label for="dropdown-demo-opt-5">
          <span class="vtmx-showers-line"></span>
          Swimming
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>

        <input type="checkbox" name="dropdown-demo" id="dropdown-demo-opt-6" />
        <label for="dropdown-demo-opt-6">
          <span class="vtmx-walk-line"></span>
          Hiking
        </label>

        <div
          class="vtmn-divider vtmn-divider_orientation--horizontal"
          role="separator"
        ></div>
      </div>
    </details>
  </div>
</div>

<script>
  let groupItems = document.querySelector('#dropdown-items');

  let inputs = groupItems.querySelectorAll('[type="checkbox"]');

  let summary = document.querySelector('#dropdown-demo summary');

  let details = document.querySelector('#dropdown-demo details');

  details.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowDown' || e.key === 'ArrowRight' || e.key === 'Enter') {
      details.setAttribute('open', true);
      inputs[0].focus();
    }
  });

  inputs.forEach((input, index) => {
    input.setAttribute('tabindex', '-1');

    input.addEventListener('keydown', (e) => {
      e.preventDefault();
      if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
        if (index < inputs.length - 1) {
          inputs[index + 1].focus();
        } else {
          inputs[0].focus();
        }
      }

      if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
        if (index <= 0) {
          inputs[inputs.length - 1].focus();
        } else {
          inputs[index - 1].focus();
        }
      }

      if (e.key === ' ') {
        inputs[index].checked = !inputs[index].checked;
      }

      if (e.key === 'Escape') {
        details.removeAttribute('open');
        summary.focus();
      }

      e.stopPropagation();
    });
  });
</script>
